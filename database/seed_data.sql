-- RVC App - Seed Data
-- ข้อมูลตัวอย่างสำหรับระบบจัดการกิจกรรมและเช็คชื่อนักเรียน
-- รันไฟล์นี้หลังจากรัน schema.sql แล้ว

-- ============================================
-- 1. สร้างแผนกวิชา (Departments)
-- ============================================

INSERT INTO departments (id, name, code, description) VALUES
    ('00000000-0000-0000-0000-000000000001', 'เทคโนโลยีสารสนเทศ', 'IT', 'ภาควิชาเทคโนโลยีสารสนเทศและคอมพิวเตอร์'),
    ('00000000-0000-0000-0000-000000000002', 'บัญชี', 'ACC', 'ภาควิชาบัญชีและการเงิน'),
    ('00000000-0000-0000-0000-000000000003', 'การตลาด', 'MKT', 'ภาควิชาการตลาดและการขาย'),
    ('00000000-0000-0000-0000-000000000004', 'บริหารธุรกิจ', 'BA', 'ภาควิชาบริหารธุรกิจ'),
    ('00000000-0000-0000-0000-000000000005', 'ช่างไฟฟ้า', 'ELC', 'ภาควิชาช่างไฟฟ้าและอิเล็กทรอนิกส์'),
    ('00000000-0000-0000-0000-000000000006', 'ช่างยนต์', 'AUT', 'ภาควิชาช่างยนต์'),
    ('00000000-0000-0000-0000-000000000007', 'ช่างก่อสร้าง', 'CON', 'ภาควิชาช่างก่อสร้าง'),
    ('00000000-0000-0000-0000-000000000008', 'การโรงแรมและการท่องเที่ยว', 'HT', 'ภาควิชาการโรงแรมและการท่องเที่ยว')
ON CONFLICT (id) DO NOTHING;

-- ============================================
-- 2. สร้างห้องเรียน (Classrooms)
-- ============================================

-- ห้องเรียนแผนก IT
INSERT INTO classrooms (id, name, code, department_id, year_level, capacity) VALUES
    ('10000000-0000-0000-0000-000000000001', 'ปวส.1/1', 'IT-1-1', '00000000-0000-0000-0000-000000000001', 1, 40),
    ('10000000-0000-0000-0000-000000000002', 'ปวส.1/2', 'IT-1-2', '00000000-0000-0000-0000-000000000001', 1, 40),
    ('10000000-0000-0000-0000-000000000003', 'ปวส.2/1', 'IT-2-1', '00000000-0000-0000-0000-000000000001', 2, 40),
    ('10000000-0000-0000-0000-000000000004', 'ปวส.2/2', 'IT-2-2', '00000000-0000-0000-0000-000000000001', 2, 40)
ON CONFLICT DO NOTHING;

-- ห้องเรียนแผนกบัญชี
INSERT INTO classrooms (id, name, code, department_id, year_level, capacity) VALUES
    ('10000000-0000-0000-0000-000000000005', 'ปวส.1/1', 'ACC-1-1', '00000000-0000-0000-0000-000000000002', 1, 40),
    ('10000000-0000-0000-0000-000000000006', 'ปวส.1/2', 'ACC-1-2', '00000000-0000-0000-0000-000000000002', 1, 40),
    ('10000000-0000-0000-0000-000000000007', 'ปวส.2/1', 'ACC-2-1', '00000000-0000-0000-0000-000000000002', 2, 40)
ON CONFLICT DO NOTHING;

-- ห้องเรียนแผนกการตลาด
INSERT INTO classrooms (id, name, code, department_id, year_level, capacity) VALUES
    ('10000000-0000-0000-0000-000000000008', 'ปวส.1/1', 'MKT-1-1', '00000000-0000-0000-0000-000000000003', 1, 40),
    ('10000000-0000-0000-0000-000000000009', 'ปวส.2/1', 'MKT-2-1', '00000000-0000-0000-0000-000000000003', 2, 40)
ON CONFLICT DO NOTHING;

-- ============================================
-- 3. สร้างผู้ใช้แอดมิน (Admin User)
-- ============================================
-- หมายเหตุ: ต้องสร้างผู้ใช้ใน Supabase Authentication ก่อน
-- จากนั้นใช้ User ID ที่ได้มาแทนที่ 'ADMIN_USER_ID' ด้านล่าง

-- ตัวอย่าง: สร้าง profile สำหรับ admin
-- UPDATE profiles SET role = 'admin' WHERE id = 'ADMIN_USER_ID';
-- หรือ
-- INSERT INTO profiles (id, email, first_name, last_name, role) 
-- VALUES ('ADMIN_USER_ID', 'admin@rvc.ac.th', 'Admin', 'User', 'admin');

-- ============================================
-- 4. สร้างผู้ใช้ Staff (Staff User)
-- ============================================
-- ตัวอย่าง: สร้าง profile สำหรับ staff
-- INSERT INTO profiles (id, email, first_name, last_name, role) 
-- VALUES ('STAFF_USER_ID', 'staff@rvc.ac.th', 'Staff', 'User', 'staff');

-- ============================================
-- 5. สร้างนักเรียนตัวอย่าง (Sample Students)
-- ============================================
-- หมายเหตุ: ต้องสร้างผู้ใช้ใน Supabase Authentication ก่อน
-- จากนั้นใช้ User ID ที่ได้มาแทนที่ 'STUDENT_USER_ID' ด้านล่าง

-- ตัวอย่าง: สร้าง profile สำหรับนักเรียน
-- INSERT INTO profiles (
--   id,
--   student_id,
--   first_name,
--   last_name,
--   email,
--   gender,
--   role,
--   department_id,
--   classroom_id,
--   year_level,
--   is_active
-- ) VALUES (
--   'STUDENT_USER_ID',
--   '64010001',
--   'ทดสอบ',
--   'นักเรียน',
--   'student1@example.com',
--   'male',
--   'student',
--   '00000000-0000-0000-0000-000000000001',
--   '10000000-0000-0000-0000-000000000001',
--   1,
--   true
-- );

-- ============================================
-- 6. สร้างกิจกรรมตัวอย่าง (Sample Activities)
-- ============================================

-- กิจกรรมทั่วไป
INSERT INTO activities (
  id,
  title,
  description,
  activity_type,
  location,
  start_time,
  end_time,
  status,
  requires_photo,
  creator_id,
  target_year_levels,
  target_department_ids
) VALUES (
  '20000000-0000-0000-0000-000000000001',
  'กิจกรรมเช็คชื่อประจำวัน',
  'กิจกรรมเช็คชื่อประจำวันสำหรับนักเรียนทุกคน',
  'general',
  'หน้าเสาธง',
  NOW() + INTERVAL '1 day',
  NOW() + INTERVAL '1 day' + INTERVAL '1 hour',
  'active',
  false,
  NULL,
  ARRAY[1, 2]::INTEGER[],
  NULL
),
(
  '20000000-0000-0000-0000-000000000002',
  'กิจกรรมทำความสะอาด',
  'กิจกรรมทำความสะอาดบริเวณโรงเรียน',
  'general',
  'ทั่วทั้งโรงเรียน',
  NOW() + INTERVAL '2 days',
  NOW() + INTERVAL '2 days' + INTERVAL '2 hours',
  'draft',
  true,
  NULL,
  ARRAY[1]::INTEGER[],
  ARRAY['00000000-0000-0000-0000-000000000001']::UUID[]
)
ON CONFLICT (id) DO NOTHING;

-- ============================================
-- 7. สร้างประกาศตัวอย่าง (Sample Announcements)
-- ============================================

INSERT INTO announcements (
  id,
  title,
  content,
  is_published,
  target_audience,
  target_year_levels,
  creator_id
) VALUES (
  '30000000-0000-0000-0000-000000000001',
  'ประกาศเรื่องการเช็คชื่อ',
  'ให้นักเรียนทุกคนเช็คชื่อผ่านแอปพลิเคชันทุกวัน',
  true,
  'all',
  NULL,
  NULL
),
(
  '30000000-0000-0000-0000-000000000002',
  'ประกาศสำหรับนักศึกษาปี 1',
  'นักศึกษาปี 1 ต้องเข้าร่วมกิจกรรมทุกวัน',
  true,
  'students',
  ARRAY[1]::INTEGER[],
  NULL
)
ON CONFLICT (id) DO NOTHING;

-- ============================================
-- 8. ตรวจสอบข้อมูลที่สร้าง
-- ============================================

-- ดูแผนกวิชาทั้งหมด
-- SELECT * FROM departments;

-- ดูห้องเรียนทั้งหมด
-- SELECT c.*, d.name as department_name 
-- FROM classrooms c 
-- LEFT JOIN departments d ON c.department_id = d.id;

-- ดูผู้ใช้ทั้งหมด
-- SELECT id, email, first_name, last_name, role, is_active 
-- FROM profiles 
-- ORDER BY role, email;

-- ดูกิจกรรมทั้งหมด
-- SELECT * FROM activities ORDER BY created_at DESC;

-- ดูประกาศทั้งหมด
-- SELECT * FROM announcements ORDER BY created_at DESC;




